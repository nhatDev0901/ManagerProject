
<div class="modal-body">
    <div class="row">
        <div class="col-lg-12 col-md-12">
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <label>TITLE</label><span class="input-required">*</span>
                </div>
                <div class="col-lg-8 col-md-8">
                    <input type="text" name="name" value="" id="input-title" style="width: 100%;" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <label>DESCRIPTION</label><span class="input-required">*</span>
                </div>
                <div class="col-lg-8 col-md-8">
                    <input type="text" name="name" value="" id="input-des" style="width: 100%;" />
                </div>
            </div>
            <br />
            <div class="row">
                <div class="col-lg-4 col-md-4">
                    <label>UOLOAD FILES</label><span class="input-required">*</span>
                </div>
                <div class="col-lg-8 col-md-8">
                    <input name="fileImage" multiple="multiple" id="files" type="file" aria-label="files" />
                    @*@Html.TextBoxFor(x => x.File, new { @class = "form-control", type = "file" })*@<br />
                    <span class="text-secondary font-italic">File format .jpeg, .jpg, .png., .doc. File size max 5MB.</span>
                </div>
            </div>

            <div class="row" style="padding-top: 30px !important;">
                <div class="col-lg-4 col-md-4 checkbox-policy" >
                    <input type="checkbox" name="terms" id="ckb-policy-accept">
                </div>
                <div class="col-lg-8 col-md-8 ">
                    <p class="text-policy">By using this form you agree with the storage and handling of your data by this website in accordance with out <a href="#" style="color: #0094ff">Privacy Policy</a></p> 
                </div>                 
            </div>
            
            <br />
            <div class="row">
                <div class="col-lg-4 col-md-4">

                </div>
                <div class="col-lg-8 col-md-8">
                    <button id="btn-add" class="btn btn-success" onclick="AddNewSubmittion()" style="width: 108px;height: 38px; background-color: #8A9A5F" disabled>Button</button>
                </div>

            </div>
            <br />

        </div>
    </div>

</div>

<script>
    $("#input-title, #input-des").kendoTextBox({

    });


    $('input[name=fileImage]').kendoUpload({
        //async: {
        //    saveUrl: "save",
        //    removeUrl: "remove",
        //    autoUpload: true
        //},
        multiple: true,
        validation: {
            maxFileSize: 5000000,//Dung lượng file upload 5mb
            allowedExtensions: [".jpeg", ".jpg", ".png", ".doc", "docx"],//Định dạng file
        }
    }).data("kendoUpload");

    $("#ckb-policy-accept").click(function () {
        if ($(this).is(':checked')) {
            $('#btn-add').attr("disabled", false);
        } else {
            $('#btn-add').attr("disabled", true);
        }
    })

    function AddNewSubmittion() {
        var formData = new FormData();

        formData.append("title", $("#input-title").data("kendoTextBox").value());
        formData.append("description", $("#input-des").data("kendoTextBox").value());
        var files = [];
        var lengthItem = $('input[name=fileImage]').length;
        for (var j = 0; j < lengthItem; j++) {
            var length = $('input[name=fileImage]').get(j).files.length;
            for (var i = 0; i < length; i++) {
                files.push($('input[name=fileImage]').get(j).files[i]);
            }
        }   
        var lengthfiles = files.length;
        for (var i = 0; i < lengthfiles; i++) {
            formData.append('files', files[i]);
        }

        $.ajax({
            url: '@Url.Action("AddSubmittion", "Home")',
            type: "POST",
            dataType: "json",
            enctype: 'multipart/form-data',
            contentType: false,
            processData: false,
            data: formData,
            success: function (result) {
                console.log("data>>", result)
            }
        });

    }
</script>
